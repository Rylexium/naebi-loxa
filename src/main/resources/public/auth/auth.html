<!DOCTYPE HTML>
<html lang="ru">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/auth/auth.css" rel="stylesheet"/>
    <title>Авторизация</title>
</head>
<script>
    window.onbeforeunload = function() {
         sessionStorage.setItem("fieldLogin", document.getElementById("fieldLogin").value);
    }
    window.onload = function() {
        var login = sessionStorage.getItem("fieldLogin")
        if(login != null || login != "") {
            document.getElementById("fieldLogin").value = login
        }
    }
    function postData() {
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:8080/login-form";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onload = function() {
                if(this.responseText == "success") {
                    document.getElementById("fieldLogin").value = ''
                    sessionStorage.removeItem("fieldLogin")
                }
                document.getElementById("fieldPass").value = ''
                alert(this.responseText);
            };
        var data = JSON.stringify({
                "fieldLogin": document.getElementById("fieldLogin").value,
                "fieldPass": document.getElementById("fieldPass").value
             });
        xhr.send(data);
    }
</script>
    <body>
        <div class="login-page">
            <div class="form">
                <form class="login-form" onsubmit="return false">
                    <p class="greeting"> Добро пожаловать! </p>
                    <input type="text" id="fieldLogin" placeholder="Логин"/>
                    <input type="password" id="fieldPass" placeholder="Пароль"/>
                    <button onclick="postData()">Войти</button>
                    <p class="message">Не зарегистрированы? <a href="#">
                        <ins>Создайте аккаунт</ins>
                    </a></p>
                </form>
            </div>
        -</div>
    </body>
</html>
